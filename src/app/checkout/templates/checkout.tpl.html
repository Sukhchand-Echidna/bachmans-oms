<div id="CheckoutTopNav" ui-view="checkouttop"></div>
<div class="checkoutContainer row" cg-busy="{promise:checkout.CheckOutLoader,templateUrl:'common/loading-indicators/templates/view.loading.tpl.html'}">
	<div class="checkoutContainer-left col-sm-9 col-xs-9 col-md-9 col-lg-9">
		<div class="checkoutSection">
			<uib-accordion close-others="checkout.oneAtATime">
				<uib-accordion-group is-open="checkout.status.delInfoOpen" is-disabled="checkout.status.isFirstDisabled">
					<uib-accordion-heading>
						<h1>1.<span ng-if="checkout.deliveryInfoDone && !checkout.status.delInfoOpen">
							<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
								 viewBox="0 0 18.3 18.3" style="enable-background:new 0 0 18.3 18.3;" xml:space="preserve">
								<g>
									<path d="M9.1,1.7C5,1.7,1.7,5,1.7,9.1s3.3,7.4,7.4,7.4s7.4-3.3,7.4-7.4S13.2,1.7,9.1,1.7z M7.7,12.4L4.9,9.5L6,8.4
										l1.7,1.7l4.5-4.5l1.1,1.1L7.7,12.4z"/>
								</g>
							</svg>
							</span> Delivery Information <button ng-click="checkout.deliveryInfoEdit($event)" ng-if="checkout.deliveryInfoDone && !checkout.status.delInfoOpen">Edit</button></h1>
					</uib-accordion-heading>
					<uib-accordion close-others="checkout.oneAtATime" ng-init="checkout.delInfoRecipient[0]=true">
						<uib-accordion-group ng-repeat="(recipient, lineitems) in checkout.activeOrders" ng-init="line=lineitems[0]" is-open="checkout.delInfoRecipient[$index]" is-disabled="$index > 0 ? checkout.delInfoTab[$index] : false">
							<uib-accordion-heading ng-init="$index > 0 ? checkout.delInfoTab[$index]=true : checkout.delInfoTab[$index]=false">
								<h2>Recipient {{$index+1}} {{line.ShippingAddress.FirstName}} {{line.ShippingAddress.LastName}} | {{line.ShippingAddress.Zip}}</h2>
							</uib-accordion-heading>
							<form name="checkout.lineItemForm[line.ID]" novalidate>
								<div class="col-sm-6 col-xs-6 col-lg-6 col-md-6 delivery-address" ng-show="!checkout.isAddrShow{{$index}}">
									<div class="address-header">
										<div class=" col-xs-6 col-sm-6 col-md-6 col-lg-6  delivery-address-header">
											Delivery Address
										</div>
										<div ng-click="checkout.viewAddrBook($index, line)" class=" col-xs-6 col-sm-6 col-md-6 col-lg-6 view-address">
											 View Address Book
											 <span>
												 <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
													<g>
														<rect x="10"  width="4" height="24" />
														<rect y="10"  width="24" height="4" />
													</g>
												</svg>
											</span>
										</div>
									</div>
									<div class="check-top inline-blk">
										<p>First Name <span class="star">*</span></p>
										<input type="text" name="firstname" ng-model="line.ShippingAddress.FirstName" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].firstname.$invalid}"></input>
									</div>
									<div class="check-top inline-blk">
										<p>Last Name <span class="star">*</span></p>
										<input type="text" name="lastname" ng-model="line.ShippingAddress.LastName" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].lastname.$invalid}"></input>
									</div>
									<div class="radio-grp check-top col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<label class="radio-inline radio-common">
											<input type="radio" id="residence{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Residence" />
											<label for="residence{{$index}}">Residence</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="hospital{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Hospital" />
											<label for="hospital{{$index}}">Hospital</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="funeral{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Funeral" />
											<label for="funeral{{$index}}">Funeral</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="church{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Church" />
											<label for="church{{$index}}">Church</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="cemetery{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Cemetery" />
											<label for="cemetery{{$index}}">Cemetery</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="business{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="Business" />
											<label for="business{{$index}}">Business</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="school{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="School" />
											<label for="school{{$index}}">School</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="store{{$index}}" name="optradio{{$index}}" ng-model="line.xp.addressType" ng-click="checkout.changeAddrType(line)" ng-disabled="{{line.xp.NoDeliveryExInStore}}" value="InStorePickUp" />
											<label for="store{{$index}}">In-Store Pick Up</label>
											<div class="radio"></div>
										</label>
									</div>
									<p class="check-top">Zip Code <span class="star">*</span></p>
									<input type="text" name="zip" ng-model="line.ShippingAddress.Zip" ng-blur="checkout.GetDeliveryFees(line, checkout.lineItemForm[line.ID])" ng-readonly="line.xp.addressType=='InStorePickUp' ? true : false" max-length="5" ng-minlength="5" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].zip.$invalid}" class="zip-code"></input>
									<p class="check-top">Address 1 <span class="star">*</span></p>
									<input type="text" name="street1" ng-model="line.ShippingAddress.Street1" ng-blur="checkout.GetDeliveryFees(line, checkout.lineItemForm[line.ID])" ng-readonly="line.xp.addressType=='InStorePickUp' ? true : false" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].street1.$invalid}"></input>
									<p class="check-top">Address 2</p>
									<input type="text" ng-model="line.ShippingAddress.Street2" ng-readonly="line.xp.addressType=='InStorePickUp' ? true : false"></input>
									<h6 style="color:red;" ng-if="checkout.lineItemForm[line.ID].invalidAddress && line.ShippingAddress.Street1 && line.ShippingAddress.Zip">Invalid Address/Zip</h6>
									<div class="check-top city-block">
										<p>City <span class="star">*</span><span ng-if="line.ShippingAddress.City == 'Select City' ? checkout.lineItemForm[line.ID].$valid = false : ''"></span></p>
										<input type="text" name="city" ng-if="line.MultipleCities.length <= 1 || !line.MultipleCities" ng-model="line.ShippingAddress.City" ng-readonly="line.xp.addressType=='InStorePickUp' ? true : false" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].city.$invalid}"></input>
										<div ng-if="line.MultipleCities.length > 1" class="multiple-cities">
											<div uib-dropdown class="form-control " id="MultipleCities" ng-class="{errorMMyy: checkout.lineItemForm[line.ID].$submitted && line.ShippingAddress.City == 'Select City'}">
												<div id="sort-dropdown" uib-dropdown-toggle>
													<p class="sort-active-show" ng-init="line.ShippingAddress.City = 'Select City'">{{line.ShippingAddress.City}} <i class="fa fa-chevron-down"></i></p>
												</div>
												<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="sort-dropdown">
													<li ng-repeat="city in line.MultipleCities" ng-click="checkout.SelectedCity(city, line, checkout.lineItemForm[line.ID])"><a href="">{{city}}</a></li>
												</ul>
											</div>
										</div>
									</div>
									<div class="check-top state-block">
										<p class="">State <span class="star">*</span></p>
										<input type="text" name="state" ng-model="line.ShippingAddress.State" ng-readonly="line.xp.addressType=='InStorePickUp' ? true : false" required ng-class="{error: checkout.lineItemForm[line.ID].$submitted && checkout.lineItemForm[line.ID].state.$invalid}" />
									</div>
									<p class="check-top">Phone Number</p>
									<div class="phone-block">
										<input type="number" ng-model="line.ShippingAddress.Phone1" placeholder="Area Code" max-length="3" />
										<input type="number" ng-model="line.ShippingAddress.Phone2" placeholder="Prefix" max-length="3" />
										<input type="number" ng-model="line.ShippingAddress.Phone3" placeholder="Number" max-length="4" />
									</div>
									<div class="delivery-details">
										<label class="radio-inline radio-common">
											<input type="radio" id="delivery-dot" name="group{{$index}}" ng-model="line.xp.addressType" ng-value="line.xp.addressType!='InStorePickUp' ? line.xp.addressType : 'Residence'">
											<label for="delivery-dot">Delivery</label>
											<div class="radio"></div>
										</label>
										<label class="radio-inline radio-common">
											<input type="radio" id="store-pickUp" ng-click="checkout.getStores(line)" name="group{{$index}}" ng-model="line.xp.addressType" value="InStorePickUp">
											<label for="store-pickUp">In-Store Pick Up</label>
											<div class="radio"></div>
										</label>
										<div ng-if="line.xp.addressType!='InStorePickUp'">
											<p class="check-top">Delivery Date <span class="star">*</span></p>
											<p class="modify" ng-init="checkout.deliveryAdj(line)" ng-if="line.xp.deliveryFeesDtls">
												<span>
													<a tabindex="0" popover-trigger="none" popover-is-open="showDeliveryToolTip" ng-click="showDeliveryToolTip = !showDeliveryToolTip" uib-popover-template="checkout.modifyDeliveryPopover.templateUrl">Modify Delivery</a>
												</span>
											</p>
												<script type="text/ng-template" id="modifyDeliveryTemplate.html">
													<div class="modify-tooltip check-top" click-outside="checkout.closePopover()">
														<div>
															<p>Delivery Fees</p>
															<div ng-repeat="(key, val) in line.xp.deliveryFeesDtls" class="delivery-handling">
																<h5>{{key}} <b ng-if="key=='ServiceFee' && line.xp.DeliveryMethod=='Mixed'"> (50+ Items)</b></h5>
																<input type="text" value="{{val}}" ng-model="line.xp.deliveryFeesDtls[key]" />
															</div>
															
														</div>
														<div>
															<p>Reason For Adjustment</p>
															<select ng-options="reason for reason in checkout.buyerDtls.xp.deliveryChargeAdjReasons" ng-model="line.xp.deliveryChargeAdjReason">
															</select>
														</div>
													</div>
												</script>
											<ul class="delivery-days-info">
											   <li ng-click="checkout.dateSelect('dt',line,$index)" ng-class="{active:checkout.data{{$index}} == 'dt{{$index}}'}" class="delivery-days1">
													<p class="delivery-header">Deliver Today</p>
													<p class="delivery-day">{{dt | date:'longDate'}}</p>
													<span class="delivery-day">Available</span>
											   </li>
											   <li ng-click="checkout.dateSelect('tom',line,$index)" ng-class="{active:checkout.data{{$index}} == 'tom{{$index}}'}" class="delivery-days2">
													<p class="delivery-header">Deliver Tomorrow</p>
													<p class="delivery-day">{{tom | date:'longDate'}}</p>
													<span class="delivery-day">Available</span>
											   </li>
											   <li ng-class="{active:checkout.data{{$index}} == 'selDate{{$index}}'}" class="select-date-info">
													<p class="select-date">Select Date</p>
													<div class="date">
													<input type="text" ng-model="line.dateVal.Month" placeholder="MM" max-length="2" />/
													<input type="text" ng-model="line.dateVal.Date" placeholder="DD" max-length="2" ng-change="checkout.dateSelect()" />/
													<input type="text" ng-model="line.dateVal.Year" placeholder="YYYY" max-length="4" />
													<button type="button" ng-click="checkout.toggle(line,$index)" uib-datepicker-popup="dd.MM.yyyy" ng-model="datePicker.date" is-open="checkout.opened" show-weeks="false" show-button-bar="false" datepicker-options="{formatYear: 'yy', minDate: line.xp.MinDays.MinToday, startingDay: 0, dateDisabled:checkout.disabledDates}">
														<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
															 viewBox="0 0 33 36" style="enable-background:new 0 0 33 36;" xml:space="preserve">

														<g>
															<path d="M0,10.2v20c0,2.7,2.2,4.9,4.9,4.9H28c2.7,0,4.9-2.2,4.9-4.9v-20c0-2.7-2.2-4.9-4.9-4.9h-1v-3
																c0-0.8-0.7-1.5-1.5-1.5c-0.8,0-1.5,0.7-1.5,1.5v6c0,0.7-0.6,1.3-1.3,1.3c-0.7,0-1.3-0.6-1.3-1.3V5.3h-2.6v-3c0-0.8-0.7-1.5-1.5-1.5
																c-0.8,0-1.5,0.7-1.5,1.5v6c0,0.7-0.6,1.3-1.3,1.3c-0.7,0-1.3-0.6-1.3-1.3V5.3h-2.6v-3c0-0.8-0.7-1.5-1.5-1.5
																c-0.8,0-1.5,0.7-1.5,1.5v6c0,0.7-0.6,1.3-1.3,1.3c-0.7,0-1.3-0.6-1.3-1.3V5.3C2.2,5.3,0,7.5,0,10.2z M29.4,29.6
																c0,0.9-0.7,1.6-1.6,1.6H5.4c-0.9,0-1.6-0.7-1.6-1.6V16.7h25.6L29.4,29.6z"/>
															<path d="M19.2,29h-7l2.8-3.7c0.3-0.4,0.6-0.8,0.8-1.1c0.2-0.3,0.4-0.6,0.5-0.9c0.2-0.5,0.4-1,0.4-1.5
																c0-0.3-0.1-0.5-0.2-0.7c-0.1-0.2-0.3-0.2-0.5-0.2c-0.4,0-0.7,0.4-0.7,1.2c0,0,0,0.1,0,0.2c0,0.1,0,0.1,0,0.2h-2.7l0-0.4
																c0-1,0.3-1.8,0.9-2.5c0.6-0.6,1.5-0.9,2.4-0.9c1,0,1.7,0.3,2.3,0.9c0.6,0.6,0.9,1.4,0.9,2.4c0,0.8-0.2,1.6-0.6,2.3
																c-0.2,0.4-0.5,0.8-0.8,1.2c-0.3,0.4-0.7,0.8-1.2,1.3c0.4-0.1,0.8-0.2,1.2-0.2c0.4,0,0.8-0.1,1.3-0.1L19.2,29L19.2,29z"/>
														</g>
														</svg>
													</button>
													</div>
												</li>
											</ul>
											<p class="delivery-date">Delivery Preference <span class="star">*</span></p>
											<ul class="delivery-days-info">
												<li ng-click="line.xp.deliveryRun='Run1'" ng-class="{active:line.xp.deliveryRun=='Run1'}" class="preference">
													<p class="delivery-header">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run1.Name}}</p>
													<p class="delivery-day">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run1.TimeSlot}}</p>
												</li>
												<li ng-click="line.xp.deliveryRun='Run2'" ng-class="{active:line.xp.deliveryRun=='Run2'}" class="preference">
													<p class="delivery-header">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run2.Name}}</p>
													<p class="delivery-day">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run2.TimeSlot}}</p>
												</li>
												<li ng-click="line.xp.deliveryRun='Run3'" ng-class="{active:line.xp.deliveryRun=='Run3'}" class="preference">
													<p class="delivery-header">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run3.Name}}</p>
													<p class="delivery-day">{{checkout.buyerDtls.xp.DeliveryRuns[0].Run3.TimeSlot}}</p>
												</li>
											</ul>
										</div>
										<div ng-if="line.xp.addressType=='InStorePickUp'" class="select-store">
											 <p>Select Store</p>
												 <input type="search" ng-model="line.ShippingAddress.CompanyName" autocomplete="off" ng-value="line.xp.addressType=='InStorePickUp' ? line.ShippingAddress.CompanyName : ''" uib-typeahead="st for st in checkout.storeNames | filter:$viewValue" typeahead-on-select="checkout.addStoreAddress($item, line)" />
											 <p>
											<fieldset id="group2">
												<label class="radio-inline radio-common">
													<input type="radio" name="group2" ng-model="checkout.fromStoreOrOutside" value="1">
													<span>Product is coming from my store</span>
													<div class="radio"></div>
												</label>
												<label class="radio-inline radio-common">
													<input type="radio" name="group2" ng-model="checkout.fromStoreOrOutside" value="2">
													<span>Product is coming from somewhere else</span>
													<div class="radio"></div>
												</label>
											</fieldset>
											</p>
										</div>
									</div>
								</div>
								<!-- <div ng-click="checkout.back($index)" ng-show="checkout.isAddrShow{{$index}}" class="page_header_back">
									<a type="button" href="">Back</a>
								</div> -->
								<div ng-click="checkout.back($index)" ng-show="checkout.isAddrShow{{$index}}" class="back-common">
								    <a type="button" href="">
									<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 14 21" style="enable-background:new 0 0 14 21" xml:space="preserve"><style type="text/css">.st0{fill:#8B8E96;}</style><g><path d="M0.7,18.3l7.8-7.8L0.7,2.7L3,0.3l10.2,10.2L3,20.7L0.7,18.3z"></path></g></svg>
									Back</a>
								</div>
								<div class="saved-addr col-sm-5 col-xs-5 col-lg-5 col-md-5vi" ng-show="checkout.isAddrShow{{$index}} && addressesList.length > 0">
										<h3>Saved Delivery Address</h3>
									<uib-accordion close-others="checkout.oneAtATime">
										<uib-accordion-group ng-repeat="addr in addressesList | limitTo: line.limit" is-open="addr.isAddrOpen" ng-click="checkout.selectedAddr(line,addr)">
											<uib-accordion-heading>
													<input type="checkbox" id="saved" class="checkbox-custom" ng-checked="addr.isAddrOpen">
													<label  for="saved" class="checkbox-custom-label"></label>
													<span ng-if="!addr.CompanyName">{{addr.FirstName}} {{addr.LastName}} | {{addr.Zip}}</span>
													<span ng-if="addr.CompanyName">{{addr.CompanyName}} | {{addr.Zip}}</span>
													<span ng-if="defualtAddressID==addr.ID">(Default)</span>
											</uib-accordion-heading>
											<div ng-show="!checkout.isDeliAddrShow{{$index}}" class="saved-delivery-addr">	
												<a ng-click="checkout.deliveryAddr($index)">Edit</a>
												<div class="col-xs-8 bill-addr-value">
												<p>{{addr.Street1}}</p>
												<p>{{addr.Street2}}</p>
												<p>{{addr.Zip}}</p>
												</div>
												<div class="col-xs-8 email-value">
												<p>{{addr.Phone}}</p>
												</div> 
											</div>
											<div ng-show="checkout.isDeliAddrShow{{$index}}">
												<ng-form name="checkout.editaddress[$index]" novalidate>
													<div class="add-new-addr col-xs-12 col-sm-12 col-md-12 col-lg-12">
														<div class="name check-top col-xs-6 col-sm-6 col-md-6 col-lg-6 del-addr">
															<p>First Name <span class="star">*</span></p>
															<input type="text" name="firstname" ng-model="addr.FirstName" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].firstname.$invalid}" />
														</div>
														<div class="name check-top col-xs-6 col-sm-6 col-md-6 col-lg-6">
															<p>Last Name <span class="star">*</span></p>
															<input type="text" name="lastname" ng-model="addr.LastName" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].lastname.$invalid}" />
														</div>
														<div class=" zip-code check-top col-xs-12 col-sm-12 col-md-12 col-lg-12">
															<p class="check-top">Zip Code <span class="star">*</span></p>
															<input type="number" name="zip" ng-model="addr.Zip" ng-blur="GetCityState(addr)" max-length="5" ng-minlength="5" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].zip.$invalid}"/>
														</div>
														<p class="check-top">Address 1 <span class="star">*</span></p>
														<input type="text" name="street1" ng-model="addr.Street1" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].street1.$invalid}" />
														<p class="check-top">Address 2</p>
														<input type="text" ng-model="addr.Street2" />
														<h6 style="color:red;" ng-if="checkout.editaddress[$index].invalidAddress && addr.Street1 && addr.Zip">Invalid Address/Zip</h6>
														<div class="city check-top del-addr col-xs-12 col-sm-12 col-md-12 col-lg-12">
															<div class="location col-xs-8 col-sm-8 col-md-8 col-lg-8">
																<p>City <span class="star">*</span></p>
																<input type="text" name="city" ng-model="addr.City" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].city.$invalid}" />
															</div>
															<div class="location col-xs-4 col-sm-4 col-md-4 col-lg-4">
																<p>State <span class="star">*</span></p>
																<input type="text" name="state" ng-model="addr.State" ng-required="checkout.isDeliAddrShow{{$index}} ? true : false" ng-class="{error: checkout.editaddress[$index].$submitted && checkout.editaddress[$index].state.$invalid}" />
															</div>
														</div>
														<div class="phone-block check-top col-xs-12 col-sm-12 col-md-12 col-lg-12">
															<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
																<p>Phone Number</p>
																<div>
																	<input type="number" ng-model="addr.Phone1" placeholder="Area Code" max-length="3" />
																	<input type="number" ng-model="addr.Phone2" placeholder="Prefix" max-length="3" />
																	<input type="number" ng-model="addr.Phone3" placeholder="Number" max-length="4" />
																</div>
															</div>
															<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
																<button ng-click="checkout.UpdateAddress(addr,$index,checkout.editaddress[$index])">Save</button>
															</div>
														</div>
													</div>
												</ng-form>
											</div>
										</uib-accordion-group>
									</uib-accordion>
									<div class="more-link">
										<p ng-click="checkout.viewMore(line)" ng-if="addressesList.length > 3">View <span ng-if="line.limit==3">More
											<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
												<g>
													<rect x="10"  width="4" height="24" />
													<rect y="10"  width="24" height="4" />
												</g>
											</svg>
										</span>
										<span ng-if="line.limit!=3">Less
											<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><rect y="10" width="24" height="4"/></svg>
										</span>
										</p>
										<p ng-click="checkout.newAddress($index)">Add a New Address<span ng-show="!showNewAddress{{$index}}">
											<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
												<g>
													<rect x="10"  width="4" height="24" />
													<rect y="10"  width="24" height="4" />
												</g>
											</svg>
										</span>
										<span ng-show="showNewAddress{{$index}}">
											<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><rect y="10" width="24" height="4"/></svg>
										</span></p>
									</div>
									<!-- Add a new address -->
									<div class="add-new-addr col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-show="showNewAddress{{$index}}">
										<ng-form name="checkout.newaddress[$index]" novalidate>
											<div class="name check-top col-xs-6 col-sm-6 col-md-6 col-lg-6 del-addr">
												<p>First Name <span class="star">*</span></p>
												<input type="text" name="firstname" ng-model="addr.FirstName" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].firstname.$invalid}" />
											</div>
											<div class="name check-top col-xs-6 col-sm-6 col-md-6 col-lg-6">
												<p>Last Name <span class="star">*</span></p>
												<input type="text" name="lastname" ng-model="addr.LastName" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].lastname.$invalid}" />
											</div>
											<div class="zip-code check-top col-xs-12 col-sm-12 col-md-12 col-lg-12">
												<p>Zip Code <span class="star">*</span></p>
												<input type="number" name="zip" ng-model="addr.Zip" ng-blur="GetCityState(addr)" max-length="5" ng-minlength="5" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].zip.$invalid}" />
											</div>
											<p class="check-top">Address 1 <span class="star">*</span></p>
											<input type="text" name="street1" ng-model="addr.Street1" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].street1.$invalid}" />
											<p class="check-top">Address 2</p>
											<input type="text" ng-model="addr.Street2" />
											<h6 style="color:red;" ng-if="checkout.newaddress[$index].invalidAddress && addr.Street1 && addr.Zip">Invalid Address/Zip</h6>
											<div class="city check-top del-addr col-xs-12 col-sm-12 col-md-12 col-lg-12">
												<div class="location col-xs-8 col-sm-8 col-md-8 col-lg-8">
													<p>City <span class="star">*</span></p>
													<input type="text" name="city" ng-model="addr.City" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].city.$invalid}" />
												</div>
												<div class="location col-xs-4 col-sm-4 col-md-4 col-lg-4">
													<p>State <span class="star">*</span></p>
													<input type="text" name="state" ng-model="addr.State" ng-required="showNewAddress{{$index}} ? true : false" ng-class="{error: checkout.newaddress[$index].$submitted && checkout.newaddress[$index].state.$invalid}" />
												</div>
											</div>
											<div class="phone-block check-top col-xs-12 col-sm-12 col-md-12 col-lg-12">
												<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
													<p>Phone Number</p>
													<div>
														<input type="number" ng-model="addr.Phone1" placeholder="Area Code" max-length="3"  />
														<input type="number" ng-model="addr.Phone2" placeholder="Prefix" max-length="3" />
														<input type="number" ng-model="addr.Phone3" placeholder="Number" max-length="4" />
													</div>
												</div>
												<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
													<button ng-click="checkout.CreateAddress(addr,$index,checkout.newaddress[$index])">Save</button>
												</div>
											</div>
										</ng-form>
									</div>
								</div>
								<div class="delivery-instructions col-lg-6 col-md-6">
									<h3>Delivery Instructions</h3>
									<p>Delivery Instructions:</p>
									<textarea rows="3" ng-model="line.xp.deliveryNote"></textarea>
									<div ng-init="line.xp.CardMessage ? line.cardMsg=false : line.cardMsg=true">
										<div class="no-msg">
											<span>Card Message</span>
											<div class="no-msg-cont">
 												<input type="checkbox" ng-model="line.cardMsg" id="noMessage{{$index}}" class="checkbox-custom" name="cardmessage">
 												<label  for="noMessage{{$index}}" class="checkbox-custom-label">No Message</label>
											</div>
										</div>
										<div class="line-msgs" ng-class="{'hideItem': !line.cardMsg}">
											<p>Line 1</p>
											<input type="text" ng-model="line.xp.CardMessage.line1"></input>
											<p>Line 2</p>
											<input type="text" ng-model="line.xp.CardMessage.line2"></input>
											<p>Line 3</p>
											<input type="text" ng-model="line.xp.CardMessage.line3"></input>
											<p>Line 4</p>
											<input type="text" ng-model="line.xp.CardMessage.line4"></input>
										</div>
									</div>
									<div class="instruction">
										<b>instruction :</b>
									</div>
								</div>
								<div class="col-lg-12 col-md-12">
									<input type="button" ng-disabled="!line.xp.deliveryRun && line.xp.addressType!='InStorePickUp'" ng-value="checkout.recipients.length == $index+1 ? 'Continue to Payment' : 'Next'" ng-click="checkout.ProceedToPayment(lineitems, $index, checkout.lineItemForm[line.ID])" />
								</div>
							</form>
						</uib-accordion-group>
					</uib-accordion>
				</uib-accordion-group>
				<uib-accordion-group is-open="checkout.status.paymentOpen" ng-init="checkout.status.isSecondDisabled=true" is-disabled="checkout.status.isSecondDisabled">
					<uib-accordion-heading>
						<h1>2.<span ng-if="checkout.paymentDone && !checkout.status.paymentOpen">
							<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
								 viewBox="0 0 18.3 18.3" style="enable-background:new 0 0 18.3 18.3;" xml:space="preserve">
								<g>
									<path d="M9.1,1.7C5,1.7,1.7,5,1.7,9.1s3.3,7.4,7.4,7.4s7.4-3.3,7.4-7.4S13.2,1.7,9.1,1.7z M7.7,12.4L4.9,9.5L6,8.4
										l1.7,1.7l4.5-4.5l1.1,1.1L7.7,12.4z"/>
								</g>
							</svg>
							</span> Payment <button ng-click="checkout.paymentInfoEdit($event)" ng-if="checkout.paymentDone && !checkout.status.paymentOpen">Edit</button></h1>
					</uib-accordion-heading>
					<div class="payment-module">
					<div class="payment-method col-xs-7 col-sm-7 col-md-7 col-lg-7">
						<div class="payment-method-header">
							<h1>Payment Method</h1>
							<div class="payment-tab" ng-click="checkout.paymentOption = 'CreditCard'" ng-class="{'active-tab':checkout.selectedCard.CVV.length>=3 || checkout.card.CVV.length>=3, 'highlight': checkout.paymentOption == 'CreditCard'}">Credit Card
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
							<div ng-click="checkout.paymentOption = 'BachmansCharge'" ng-class="{'active-tab': checkout.orderDtls.SpendingAccounts.BachmansCharges, 'highlight': checkout.paymentOption == 'BachmansCharge'}" ng-show="checkout.UserSpendingAcc['Bachman Charges'] && checkout.buyerDtls.xp.PaymentMethods.BachmansCharge.OMS">Bachman's Charges
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
							<div ng-click="checkout.paymentOption = 'GiftCard'" ng-class="{'active-tab': checkout.orderDtls.SpendingAccounts.GiftCard, 'highlight': checkout.paymentOption == 'GiftCard'}">Gift Card
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
							<div ng-click="checkout.paymentOption = 'PurplePerk'" ng-show="checkout.UserSpendingAcc['Purple Perks'] && checkout.buyerDtls.xp.PaymentMethods.PurplePerks.OMS && checkout.UserSpendingAcc['Purple Perks'].Balance > 0" ng-class="{'active-tab': checkout.orderDtls.SpendingAccounts.PurplePerks, 'highlight': checkout.paymentOption == 'PurplePerk'}">Purple Perks
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
							<div ng-click="checkout.paymentOption = 'CashCheque'" ng-class="{'active-tab': checkout.orderDtls.SpendingAccounts.PaidCash || checkout.orderDtls.SpendingAccounts.Cheque, 'highlight': checkout.paymentOption == 'CashCheque'}">Cash/Cheque
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
							<div ng-if="checkout.CurrentUser.xp.PO.PORequired=='Yes'" ng-click="checkout.ClearOtherPayments()" ng-class="{'active-tab': checkout.paymentOption == 'PO', 'highlight': checkout.paymentOption == 'PO'}">PO
								<span class="selected">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M5.378 11.37L2 7.59l1.438-1.286L5.374 8.47l5.185-5.84L12 3.91l-6.622 7.46" fill="#fff"/></svg>
								</span>
							</div>
						</div>
						<!-- credit card -->
						<div class="payment-method-container col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-repeat="card in checkout.creditCardsList" ng-if="checkout.paymentOption == 'CreditCard'">
                            <div ng-init="checkout.getBillingAddress(card)">
                                <div class="payment-container-header">
                                    <label class="radio-inline radio-common">
										<input type="radio" ng-model="checkout.selectedCard" ng-value="card">
										<div class="radio"></div>
										<span><i class="fa fa-2x" ng-class="{' fa-cc-amex': card.CardType === 'AmericanExpress', ' fa-cc-mastercard': card.CardType === 'MasterCard', ' fa-cc-visa': card.CardType === 'Visa', ' fa-cc-discover': card.CardType === 'Discover'}"></i></span>
                                        <span>XXXX XXX XXX {{card.PartialAccountNumber}}</span>
                                        <span>{{card.ExpirationDate | date : 'MM/yy' : 'UTC'}}</span>
                                        <span>{{card.CardholderName}}</span>	
									</label>
                                </div>
                                <div class="payment-container row" ng-if="card === checkout.selectedCard">
                                    <div class="pay-m col-xs-12 col-sm-12 col-md-10 col-lg-10 col-lg-offset-1">
                                       <div class="col-xs-4 cvv-title">
										<p>Enter CVV Code <span class="star">*</span></p>
										</div>
										<div class="col-xs-8 cvv-value">
										<form class="cvv-from" novalidate name="card.cvvform">
											<div class="form-group">
												<input type="text" class="form-control" name="cvv" id="cvvNumber" ng-model="card.CVV" ng-required="card == checkout.selectedCard" ng-class="{error: card.cvvform.$submitted && card.cvvform.cvv.$invalid}" />
												<span class="cvv-help-icon">
													<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-652.2 494.3 18.7 18.7" style="enable-background:new -652.2 494.3 18.7 18.7;" xml:space="preserve">
													<g>
														<g>
															<path d="M-643.1,505.6c-0.3-0.3-0.5-0.6-0.5-1.1c0-0.3,0.1-0.6,0.2-0.8c0.2-0.2,0.4-0.5,0.6-0.6
																c0.2-0.2,0.5-0.3,0.7-0.5c0.2-0.2,0.4-0.3,0.6-0.6c0.2-0.2,0.2-0.4,0.2-0.7c0-0.4-0.1-0.6-0.4-0.9c-0.3-0.2-0.6-0.3-1.1-0.3
																c-0.9,0-1.6,0.4-2.1,1.1l-0.7-0.7c0.7-0.9,1.6-1.3,2.9-1.3c0.8,0,1.4,0.2,1.9,0.6c0.5,0.4,0.7,0.9,0.7,1.5c0,0.4-0.1,0.7-0.3,1
																c-0.2,0.3-0.4,0.5-0.6,0.7s-0.5,0.4-0.7,0.5c-0.2,0.2-0.5,0.4-0.6,0.6c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.6
																L-643.1,505.6z M-642.3,507.9c-0.1,0.1-0.3,0.2-0.5,0.2c-0.2,0-0.4-0.1-0.5-0.2c-0.1-0.1-0.2-0.3-0.2-0.5c0-0.2,0.1-0.4,0.2-0.5
																c0.1-0.1,0.3-0.2,0.5-0.2c0.2,0,0.4,0.1,0.5,0.2c0.1,0.1,0.2,0.3,0.2,0.5C-642.1,507.6-642.2,507.8-642.3,507.9z"></path>
														</g>
														<g>
															<path d="M-642.8,512.4c-4.8,0-8.8-3.9-8.8-8.8s3.9-8.8,8.8-8.8s8.8,3.9,8.8,8.8S-638,512.4-642.8,512.4z
																 M-642.8,495.6c-4.4,0-8,3.6-8,8s3.6,8,8,8s8-3.6,8-8S-638.4,495.6-642.8,495.6z"></path>
														</g>
													</g>
													</svg>
												</span>
												<label for="cvvNumber">CVV code is on the back side of your card-radio</label>
											</div>
										</form>
										</div>
										<div class="col-xs-4 bill-addr-title">
										<p>Billing Address</p>
										</div>
										<form ng-show="!checkout.EditBillAddress{{$index}}" novalidate>
											<div class="col-xs-8 bill-addr-value">
											<p>{{card.BillingAddress.Street1}}</p>
											<p>{{card.BillingAddress.Street2}}</p>
											<p>{{card.BillingAddress.City}}, {{card.BillingAddress.State}}</p>
											<p>{{card.BillingAddress.Zip}}</p>
											<a href="javascript:void(0)" class="edit-link" ng-click="checkout.ShowEditBillingAddress(card.BillingAddress, $index)">Edit</a>
											</div>
											<div class="col-xs-8 col-xs-offset-4 email-value">
											<p>{{card.BillingAddress.xp.Email}}</p>
											</div> 
										</form>
										<form ng-show="checkout.EditBillAddress{{$index}}" name="checkout.EditBillingForm" ng-submit="checkout.EditBillingAddress(card.BillingAddress, $index, checkout.EditBillingForm)" class="billing-form" novalidate>
											<div class="col-xs-12">
												<div class="col-xs-6 form-group holder-name p0">
													<label for="firstName">First Name <span class="star">*</span></label>
													<input type="text" class="form-control" name="firstname" id="firstName" placeholder="First Name" ng-model="card.BillingAddress.FirstName" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.firstname.$invalid}" />
												</div>
												<div class="col-xs-6 form-group card-number p0">
													<label for="lastName">Last Name <span class="star">*</span></label>
													<input type="text" class="form-control" name="lastname" id="lastName" placeholder="Last Name" ng-model="card.BillingAddress.LastName" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.lastname.$invalid}" />
												</div>
	                                        </div>
											<div class="col-xs-12 form-group p0">
	                                            <label for="street1">Address 1 <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="street1" id="street1" placeholder="Street 1" ng-model="card.BillingAddress.Street1" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.street1.$invalid}" />
											</div>	
	                                        <div class="col-xs-12 form-group card-number p0">
	                                            <label for="street2">Address 2</label>
	                                            <input type="text" class="form-control" id="street2" placeholder="Street 2" ng-model="card.BillingAddress.Street2" />
	                                        </div>
											<div class="col-xs-8 form-group holder-name p0">
	                                            <label for="city">City <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="city" id="city" placeholder="City" ng-model="card.BillingAddress.City" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.city.$invalid}"  />
	                                        </div>
	                                        <div class="col-xs-4 form-group card-number p0">
	                                            <label for="state">State <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="state" id="state" placeholder="State" ng-model="card.BillingAddress.State" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.state.$invalid}" />
	                                        </div>
											<div class="col-xs-12 form-group card-number p0">
	                                            <label for="zip">Zip <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="zip" max-length="5" id="zip" placeholder="Zip" ng-model="card.BillingAddress.Zip" ng-required="checkout.EditBillAddress{{$index}}" ng-class="{error: checkout.EditBillingForm.$submitted && checkout.EditBillingForm.zip.$invalid}" />
												<h6 style="color:red;" ng-if="checkout.EditBillingForm.invalidAddress && checkout.BillingAddress.Street1 && checkout.BillingAddress.Zip">Invalid Address/Zip</h6>
	                                        </div>
											<div class="col-xs-12 form-group card-number p0 phone-book">
												<label for="phone" class="col-xs-12">Phone Number</label>
												<input type="number" ng-model="card.BillingAddress.Phone1" placeholder="Area Code" max-length="3" />
												<input type="number" ng-model="card.BillingAddress.Phone2" placeholder="Prefix" max-length="3" />
												<input type="number" ng-model="card.BillingAddress.Phone3" placeholder="Number" max-length="4" />
											</div>
											<div class="col-xs-12 form-group card-number p0">
	                                            <label for="email">Enter Your Email Address</label>
	                                            <input type="text" class="form-control" id="email" placeholder="Email Address" ng-model="card.BillingAddress.xp.Email" />
	                                        </div>
											<div class="col-xs-12 form-group card-number p0 save-button">
	                                            <input type="submit" class="form-control" id="submitButton" value="SAVE" />
	                                        </div>
										</form>										
                                    </div>
                                </div>
                            </div>
						</div>
						<!-- Add/pay new card-->
						<div class="add-card-container col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-if="checkout.paymentOption == 'CreditCard'">
                            <div>
                                <div class="add-card-header">
                                    <label class="radio-inline radio-common">
									<input type="radio" ng-model="checkout.selectedCard" value="createcreditcard">
									<div class="radio"></div>
									<span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
												<g>
													<rect x="10" width="4" height="24"></rect>
													<rect y="10" width="24" height="4"></rect>
												</g>
											</svg> Add/Pay with a new card</span>	
									</label>
                                </div>
                                <div class="add-card-method-container row" ng-if="checkout.selectedCard === 'createcreditcard'">
                                    <div class="col-xs-12 card-info-cont">
	                                    <form class="input-card-form" name="checkout.CreditCardDetailForm" novalidate>
	                                        <div class="col-xs-12 form-group holder-name p0">
	                                            <label for="cardholderName">Cardholder's Name <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="cardholderName" id="cardholderName" placeholder="Name" ng-model="checkout.card.CardholderName" ng-required="checkout.selectedCard=='createcreditcard'" ng-class="{error: checkout.CreditCardDetailForm.$submitted && checkout.CreditCardDetailForm.cardholderName.$invalid}" />
	                                        </div>
	                                        <div class="col-xs-12 form-group card-number p0">
	                                            <label for="cardNumber">Card Number <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="cardnumber" id="cardNumber" placeholder="Number" max-length="16" ng-model="checkout.card.CardNumber" ng-required="checkout.selectedCard=='createcreditcard'" ng-class="{error: checkout.CreditCardDetailForm.$submitted && checkout.CreditCardDetailForm.cardnumber.$invalid}" />
	                                        </div>
	                                        <div class="col-xs-6 form-group exp-date p0">
	                                            <label for="expDate">Expiration Date <span class="star">*</span></label>
		                                         <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
		                                         	<div uib-dropdown class="form-control " id="expmonth" ng-class="{errorMMyy: checkout.CreditCardDetailForm.$submitted && checkout.card.ExpMonth=='MM' && checkout.selectedCard=='createcreditcard'}">
								                     <div id="sort-dropdown" uib-dropdown-toggle>
								                     <p class="sort-active-show" ng-init="checkout.card.ExpMonth = 'MM'">{{checkout.card.ExpMonth}}</p></div>
								                     <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="sort-dropdown">
								                        <li ng-repeat="month in ['01 (Jan)','02 (Feb)','03 (Mar)','04 (Apr)','05 (May)','06 (Jun)','07 (Jul)','08 (Aug)','09 (Sep)','10 (Oct)','11 (Nov)','12 (Dec)']" ng-click="checkout.card.ExpMonth=month"><a href="">{{month}}</a></li>
								                     </ul>
								                    </div>
		                                         </div>
		                                       	<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
		                                       		 <div uib-dropdown class="form-control " id="expyear" ng-class="{errorMMyy: checkout.CreditCardDetailForm.$submitted && checkout.card.ExpYear=='YYYY' && checkout.selectedCard=='createcreditcard'}">
								                     <div id="sort-dropdown" uib-dropdown-toggle>
								                     <p class="sort-active-show" ng-init="checkout.card.ExpYear = 'YYYY'">{{checkout.card.ExpYear}}</p></div>
								                     <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="sort-dropdown">
								                        <li ng-repeat="year in checkout.CardExpYears" ng-click="checkout.card.ExpYear=year"><a href="">{{year}}</a></li>
								                     </ul>
								                    </div>
		                                       	</div>
	                                          </div>
	                                        <div class="col-xs-6 form-group cvv-number">
	                                            <label for="cvvNumber">CVV <span class="star">*</span></label>
	                                            <input type="text" class="form-control" name="cvv" id="cvvNumber" ng-model="checkout.card.CVV" ng-required="checkout.selectedCard=='createcreditcard'" ng-class="{error: checkout.CreditCardDetailForm.$submitted && checkout.CreditCardDetailForm.cvv.$invalid}" />
	                                            <span class="cvv-help">
	                                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	                                                 viewBox="-652.2 494.3 18.7 18.7" style="enable-background:new -652.2 494.3 18.7 18.7;" xml:space="preserve">
	                                                <g>
	                                                    <g>
	                                                        <path d="M-643.1,505.6c-0.3-0.3-0.5-0.6-0.5-1.1c0-0.3,0.1-0.6,0.2-0.8c0.2-0.2,0.4-0.5,0.6-0.6
	                                                            c0.2-0.2,0.5-0.3,0.7-0.5c0.2-0.2,0.4-0.3,0.6-0.6c0.2-0.2,0.2-0.4,0.2-0.7c0-0.4-0.1-0.6-0.4-0.9c-0.3-0.2-0.6-0.3-1.1-0.3
	                                                            c-0.9,0-1.6,0.4-2.1,1.1l-0.7-0.7c0.7-0.9,1.6-1.3,2.9-1.3c0.8,0,1.4,0.2,1.9,0.6c0.5,0.4,0.7,0.9,0.7,1.5c0,0.4-0.1,0.7-0.3,1
	                                                            c-0.2,0.3-0.4,0.5-0.6,0.7s-0.5,0.4-0.7,0.5c-0.2,0.2-0.5,0.4-0.6,0.6c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.6
	                                                            L-643.1,505.6z M-642.3,507.9c-0.1,0.1-0.3,0.2-0.5,0.2c-0.2,0-0.4-0.1-0.5-0.2c-0.1-0.1-0.2-0.3-0.2-0.5c0-0.2,0.1-0.4,0.2-0.5
	                                                            c0.1-0.1,0.3-0.2,0.5-0.2c0.2,0,0.4,0.1,0.5,0.2c0.1,0.1,0.2,0.3,0.2,0.5C-642.1,507.6-642.2,507.8-642.3,507.9z"/>
	                                                    </g>
	                                                    <g>
	                                                        <path d="M-642.8,512.4c-4.8,0-8.8-3.9-8.8-8.8s3.9-8.8,8.8-8.8s8.8,3.9,8.8,8.8S-638,512.4-642.8,512.4z
	                                                             M-642.8,495.6c-4.4,0-8,3.6-8,8s3.6,8,8,8s8-3.6,8-8S-638.4,495.6-642.8,495.6z"/>
	                                                    </g>
	                                                </g>
	                                                </svg>
	                                            </span>
	                                        </div>
											<!--Add new Billing address fields ends here  -->
	                                    </form>
                                     </div>
                                </div>
                            </div>
						</div>
						<!-- Bachmans charges -->
						<div class="payment-method-container charges col-xs-10 col-sm-10 col-md-10 col-lg-10" ng-show="checkout.paymentOption == 'BachmansCharge'">
							<div>
								<div class="payment-container-header">
									<span>Bachman's Charge Limit Available</span>
									<span class="total">{{checkout.UserSpendingAcc['Bachman Charges'].Balance | currency}}</span>
								</div>
								<div class="payment-container row">
									<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 bachmans-charges">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<label class="radio-inline radio-common">
											<input type="radio" ng-model="BachmansCharges" name="BachmansCharge" value="Full" /><span>use {{checkout.UserSpendingAcc['Bachman Charges'].Balance | currency}} Bachman's Charge</span>
											<div class="radio"></div>
										</label>	
										</div>
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 charges-cont">
											<label class="radio-inline radio-common">
											<input type="radio" ng-model="BachmansCharges" name="BachmansCharge" value="Custom" /><span>Enter Custom Charge</span>
											<div class="radio"></div>
										   </label>
											</div>
											<input type="number" ng-model="txtBachmanCharges" class="col-xs-5 col-sm-5 col-md-5 col-lg-5" ng-disabled="BachmansCharges == 'Full'" /><span></span>
										</div>
										<span style="color:red;" ng-if="txtBachmanCharges > checkout.UserSpendingAcc['Bachman Charges'].Balance">You cannot exceed your balance limit...!</span>
										<button ng-disabled="txtBachmanCharges > checkout.UserSpendingAcc['Bachman Charges'].Balance" ng-click="checkout.ApplySpendingAccCharges(checkout.UserSpendingAcc['Bachman Charges'], BachmansCharges, txtBachmanCharges, checkout.orderDtls, 'Bachman Charges')">Apply</button>
									</div>
								</div>
							</div>
						</div>
						<!-- Gift Card -->
						<div class="payment-method-container perk col-xs-10 col-sm-10 col-md-10 col-lg-10" ng-show="checkout.paymentOption == 'GiftCard'">
							<div>
								<div class="payment-container-header col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<span>Gift Card Information</span>
								</div>
								<div class="payment-container row">
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 payment-options">
												<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
													<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 gift-card">
														<span>Enter 14 or 16 Digit Gift Card Number</span>
													</div>
													<input ng-model="GiftCardNo" type="text" class="col-xs-6 col-sm-6 col-md-6 col-lg-6" />
												</div>
												<span style="color:red;" ng-if="checkout.InvalidGiftCard">Gift Card Not Available/Expired...!</span>
												<button ng-click="checkout.GCApply(GiftCardNo, checkout.orderDtls)">Apply</button>
											</div>
									</div>
								</div>
							</div>
						</div>
						<!-- cash/cheque -->
						<div class="payment-method-container cheque col-xs-10 col-sm-10 col-md-10 col-lg-10" ng-if="checkout.paymentOption == 'CashCheque'">
							<div>
								<div class="payment-container row">
									<div class="col-xs-11 col-sm-11 col-md-11 col-lg-11 payment-options1">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<div>
											<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
												<label class="radio-inline radio-common">
													<input type="radio" name="CashCharge" value="PayCash" ng-model="checkout.PayCashCheque" />
													<p>Pay through Cash</p><br>
													<p>Amount paid through cash</p>
													<div class="radio"></div>
												</label>
											</div>
											<input type="number" ng-disabled="checkout.PayCashCheque == 'PayCheque'" ng-model="checkout.txtPayCash"  class="col-xs-6 col-sm-6 col-md-6 col-lg-6"/>
											</div>
											<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
												<div>
													<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
													<label class="radio-inline radio-common">
														<input type="radio" name="CashCharge" ng-model="checkout.PayCashCheque" value="PayCheque" />
														<p>Pay through Cheque</p><br>
														<p>Check Number</p>
														<div class="radio"></div>
													</label>
													</div>
													<input type="number" class="col-xs-6 col-sm-6 col-md-6 col-lg-6" ng-disabled="checkout.PayCashCheque == 'PayCash'" ng-model="checkout.txtChequeNumber" />
													<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
													<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 payment-amt">
													<label class="radio-inline radio-common">
														<p>Amount Paid through Cheque</p>
														<!-- <div class="radio"></div> -->
													</label>
													</div>
													<input ng-disabled="checkout.PayCashCheque == 'PayCash'" type="number" ng-model="checkout.txtChequeAmt" class="col-xs-6 col-sm-6 col-md-6 col-lg-6"/>
													</div>
													</div>
												</div>
											</div>
										<button ng-click="checkout.PayByChequeOrCash(checkout.orderDtls)">Apply</button>
									</div>
								</div>
							</div>
						</div>
						<!-- purple perks -->
						<div class="payment-method-container perk col-xs-10 col-sm-10 col-md-10 col-lg-10" ng-show="checkout.paymentOption == 'PurplePerk'">
							<div>
								<div class="payment-container-header col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<span>Purple Perks balance available</span>
									<span class="total">{{checkout.UserSpendingAcc['Purple Perks'].Balance | currency}}</span>
								</div>
								<div class="payment-container row">
									<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 payment-options">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<div>
												<label class="radio-inline radio-common">
													<input type="radio" name="PurpleCharge" ng-model="PurpleCharges" value="Full" /><span>
														use {{checkout.UserSpendingAcc['Purple Perks'].Balance | currency}} Purple Perks balance
													</span>
													<div class="radio"></div>
												</label>
											</div>
											<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
												<div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 charges-cont">
													 <label class="radio-inline radio-common">
														<input type="radio" ng-model="PurpleCharges" name="PurpleCharge" value="Custom" /><span>
															Enter Custom charge
														</span>
														<div class="radio"></div>
													 </label>
											     </div>
											     <input ng-model="txtPurpleCharges" type="number" class="col-xs-5 col-sm-5 col-md-5 col-lg-5" ng-disabled="PurpleCharges == 'Full'" />
											</div>
										</div>
										<span style="color:red;" ng-if="txtPurpleCharges > checkout.UserSpendingAcc['Purple Perks'].Balance">You cannot exceed your balance limit...!</span>
										<button ng-disabled="txtPurpleCharges > checkout.UserSpendingAcc['Purple Perks'].Balance" ng-click="checkout.ApplySpendingAccCharges(checkout.UserSpendingAcc['Purple Perks'], PurpleCharges, txtPurpleCharges, checkout.orderDtls, 'Purple Perks')">Apply</button>
									</div>
								</div>
							</div>
						</div>
						<div class="payment-method-container perk col-xs-10 col-sm-10 col-md-10 col-lg-10" ng-show="checkout.paymentOption == 'PO'">
							<div>
								<div class="payment-container-header col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<span>Purchase Order</span>
								</div>
								<div class="payment-container row">
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 payment-options">
												<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
													<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 po-num">
														<span>PO Number</span>
													</div>
													<input ng-model="checkout.CurrentUser.xp.PO.PONumber" type="text" class="col-xs-6 col-sm-6 col-md-6 col-lg-6" />
												</div>
											</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 billing-address" ng-if="checkout.selectedCard=='createcreditcard'">
											<h1>Billing Address</h1>
											<div class="billing-options col-xs-12">
											<div class="col-xs-6"  ng-if="checkout.creditCardsList.length > 0">
											<label class="radio-inline radio-common">
											<input type="radio" id="addressbook" ng-model="checkout.BillingAddresses" value="addressbook" name="address" />
											<label for="addressbook">Address Book</label>
											<div class="radio"></div>
										    </label>
											</div>
											<div class="col-xs-6">
											<label class="radio-inline radio-common">
											<input type="radio" id="current-recp" ng-model="checkout.BillingAddresses" value="currentrecipients" name="address" />
											<label for="current-recp">Current Recipients</label>
											<div class="radio"></div>
										    </label>
											</div>
											</div>
											<div class="client-list col-xs-12" ng-if="checkout.BillingAddresses == 'addressbook'" ng-init="checkout.creditCardsList.length < 3 ? checkout.billingLimit=checkout.creditCardsList.length : checkout.billingLimit=3">
												<div class="client-del" ng-repeat="line in checkout.creditCardsList track by line.BillingAddress.ID | limitTo: checkout.billingLimit">
													<div class="col-xs-12">
													<label class="radio-inline radio-common col-xs-12">
													<input type="radio" id="client-addr{{$index}}" ng-value="line.BillingAddress" ng-click="checkout.billingAddress = line.BillingAddress" ng-model="checkout.BillingAddressesSelected" name="addressesbook" />
													<label for="client-addr{{$index}}" class="col-xs-12"> 
													<span>{{line.BillingAddress.FirstName}} {{line.BillingAddress.LastName}}</span>|
												     <span>{{line.BillingAddress.Zip}}</span>
												     <!-- <span> (Default)</span> -->
												     <span class="client-addr">
												     		{{line.BillingAddress.Street1}} {{line.BillingAddress.Street2}}, {{line.BillingAddress.City}}, {{line.BillingAddress.State}}
												     </span>
												     </label>
													<div class="radio"></div>
												    </label>
												    </div>
												</div>
												<div class="view-more" ng-if="checkout.billingLimit >= 3 && checkout.billingLimit != checkout.creditCardsList.length" ng-click="checkout.billingLimit = checkout.creditCardsList.length"><a>View More+</a></div>
												<div class="view-more" ng-if="checkout.billingLimit == checkout.creditCardsList.length && checkout.billingLimit > 3" ng-click="checkout.billingLimit = 3"><a>View Less-</a></div>
											</div>
											<div class="client-list col-xs-12" ng-if="checkout.BillingAddresses == 'currentrecipients'" ng-init="checkout.deliveryInfo.length < 3 ? checkout.shippingLimit=checkout.deliveryInfo.length : checkout.shippingLimit=3">
												<div class="client-del" ng-repeat="line in checkout.deliveryInfo | limitTo: checkout.shippingLimit">
													<div class="col-xs-12">
													<label class="radio-inline radio-common col-xs-12">
													<input type="radio" id="client-recp{{$index}}" ng-value="line.ShippingAddress" ng-click="checkout.billingAddress = line.ShippingAddress" ng-model="checkout.BillingAddressesSelected" name="addressesbook" />
													<label for="client-recp{{$index}}" col-xs-12>
														<span>{{line.ShippingAddress.FirstName}} {{line.ShippingAddress.LastName}}</span>|
												     <span>{{line.ShippingAddress.Zip}}</span>
												    <!--  <span> (Default)</span> -->
												    <span class="client-addr">
												    	{{line.ShippingAddress.Street1}} {{line.ShippingAddress.Street2}}, {{line.ShippingAddress.City}}, {{line.ShippingAddress.State}}
												    </span>
													</label>
													<div class="radio"></div>
												    </label>
													</div>
												</div>
												<div class="view-more" ng-if="checkout.shippingLimit >= 3 && checkout.shippingLimit != checkout.deliveryInfo.length" ng-click="checkout.shippingLimit = checkout.deliveryInfo.length">
												View More
												<span>
												<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
												<g>
													<rect x="10" width="4" height="24"></rect>
													<rect y="10" width="24" height="4"></rect>
												</g>
												</svg>
												</span>
												</div>
												<div class="view-more" ng-if="checkout.shippingLimit == checkout.deliveryInfo.length && checkout.shippingLimit > 3" ng-click="checkout.shippingLimit = 3">
												View Less<span>
												<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><rect y="10" width="24" height="4"></rect></svg>
												</span>
												</div>
											 </div>
											<form name="checkout.BillingFormSubmitted" novalidate>
												<div class="col-xs-6 form-group holder-name p0">
													<label for="firstName">First Name <span class="star">*</span></label>
													<input type="text" class="form-control" name="firstname" id="firstName" placeholder="First Name" ng-model="checkout.billingAddress.FirstName" ng-required="checkout.selectedCard=='createcreditcard'" ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.firstname.$invalid}" />
												</div>
												<div class="col-xs-6 form-group card-number p0">
													<label for="lastName">Last Name <span class="star">*</span></label>
													<input type="text" class="form-control" name="lastname" id="lastName" placeholder="Last Name" ng-model="checkout.billingAddress.LastName" ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.lastname.$invalid}" ng-required="checkout.selectedCard=='createcreditcard'" />
												</div>
												<div class="col-xs-12 form-group  p0">
													<label for="street1">Address 1 <span class="star">*</span></label>
													<input type="text" class="form-control" name="street1" id="street1" placeholder="Street 1" ng-model="checkout.billingAddress.Street1" ng-blur="checkout.ValidateAddress(checkout.billingAddress, checkout.BillingFormSubmitted)" ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.street1.$invalid}" ng-required="checkout.selectedCard=='createcreditcard'" />
												</div>
												<div class="col-xs-12 form-group card-number p0">
													<label for="street2">Address 2</label>
													<input type="text" class="form-control" id="street2" placeholder="Street 2" ng-model="checkout.billingAddress.Street2" />
												</div>
												<h6 style="color:red;" ng-if="checkout.BillingFormSubmitted.invalidAddress && checkout.billingAddress.Street1 && checkout.billingAddress.Zip">Invalid Address/Zip</h6>
												<div class="col-xs-8 form-group holder-name p0">
													<label for="city">City <span class="star">*</span></label>
													<input type="text" class="form-control" name="city" id="city" placeholder="City" ng-model="checkout.billingAddress.City" ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.city.$invalid}" ng-required="checkout.selectedCard=='createcreditcard'" />
												</div>
												<div class="col-xs-4 form-group card-number p0">
													<label for="state">State <span class="star">*</span></label>
													<input type="text" class="form-control" name="state" id="state" placeholder="State" ng-model="checkout.billingAddress.State"  ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.state.$invalid}" ng-required="checkout.selectedCard=='createcreditcard'" />
												</div>
												<div class="col-xs-12 form-group card-number zip-code p0">
													<label for="zip">Zip <span class="star">*</span></label>
													<input type="text" class="form-control" max-length="5" name="zip" id="zip" placeholder="Zip" ng-model="checkout.billingAddress.Zip" ng-blur="checkout.ValidateAddress(checkout.billingAddress, checkout.BillingFormSubmitted)" ng-required="checkout.selectedCard=='createcreditcard'" ng-class="{error: checkout.BillingFormSubmitted.$submitted && checkout.BillingFormSubmitted.zip.$invalid}" />
												</div>
												<div class="col-xs-12 form-group card-number p0 phone-book">
													<label for="phone" class="col-xs-12">Phone Number</label>
													<input type="number" ng-model="checkout.billingAddress.Phone1" placeholder="" max-length="3" />
													<input type="number" ng-model="checkout.billingAddress.Phone2" placeholder="" max-length="3" />
													<input type="number" ng-model="checkout.billingAddress.Phone3" placeholder="" max-length="4" />
												</div>
												<div class="col-xs-12 form-group card-number p0">
													<label for="email">Enter Your Email Address</label>
													<input type="text" class="form-control" id="email" placeholder="Email Address" ng-model="checkout.billingAddress.xp.Email" />
												</div>
												<div class="col-xs-12 p0 form-group card-remember">
												   <div>
													 <input type="checkbox" id="save" ng-init="checkout.addCard=false" ng-model="checkout.addCard" ng-click="checkout.ValidateAddress(checkout.billingAddress)" ng-disabled="checkout.creditCardsList.length >= 3"  class="checkbox-custom" name="cardmessage">
													 <label  for="save" class="checkbox-custom-label" ng-if="checkout.creditCardsList.length < 3">Save this card for future payments</label>
													  <label  for="save" class="checkbox-custom-label" ng-if="checkout.creditCardsList.length >= 3">Cannot add more than 3 cards</label>
													</div>
												</div>
	                                        </form>
					                   </div>
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 review-button">
								<div class="total-amt col-xs-12">
					             	<p>Total Amount Payable </p>
					             	<p class="price">{{checkout.order.Total | currency}}</p>
						         </div>
						         <div class="col-xs-12">
								<input type="button" ng-disabled="(checkout.order.Total > 0 && !checkout.selectedCard && checkout.paymentOption != 'PO') ? true : false" value="Review Order" ng-click="checkout.ProceedToReview(checkout.BillingFormSubmitted, checkout.CreditCardDetailForm)"/>
								</div>
								</div>
					</div>
				</uib-accordion-group>
				<uib-accordion-group is-open="checkout.status.reviewOpen" class="review-container" ng-init="checkout.status.isThirdDisabled=true" is-disabled="checkout.status.isThirdDisabled">
					<uib-accordion-heading>
						<h1>3. Review & Confirm Order</h1>
					</uib-accordion-heading>
					<uib-accordion close-others="false">
						<uib-accordion-group is-open="true">
							<uib-accordion-heading>
								<h2 ng-click="checkout.reviewAddress()">Customer Name</h2>
							</uib-accordion-heading>
							<div class="user-name">{{checkout.order.FromUserFirstName}} {{checkout.order.FromUserLastName}}</div>
						</uib-accordion-group>
						<uib-accordion-group is-open="true">
							<uib-accordion-heading>
								<h2>1. <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18.3 18.3" style="enable-background:new 0 0 18.3 18.3;" xml:space="preserve">
								<g>
									<path d="M9.1,1.7C5,1.7,1.7,5,1.7,9.1s3.3,7.4,7.4,7.4s7.4-3.3,7.4-7.4S13.2,1.7,9.1,1.7z M7.7,12.4L4.9,9.5L6,8.4
										l1.7,1.7l4.5-4.5l1.1,1.1L7.7,12.4z"></path>
								</g>
							</svg>Shipping Information <button class="review-edit" ng-click="checkout.deliveryInfoEdit($event)">edit</button></h2>
							</uib-accordion-heading>
							<ul ng-repeat="(recipient, lineitems) in checkout.activeOrders" class="shipping-info">
								<li class="shipping-FirstName"><p>{{lineitems[0].ShippingAddress.FirstName}} {{lineitems[0].ShippingAddress.LastName}}</p></li>
								<li class="shipping-Addresses">
									<p>{{lineitems[0].ShippingAddress.Street1}}</p>
									<p>{{lineitems[0].ShippingAddress.Street2}}</p>
									<p>{{lineitems[0].ShippingAddress.City}} {{lineitems[0].ShippingAddress.State}}</p>
									<p>{{lineitems[0].ShippingAddress.Country}}</p>
									<p>{{lineitems[0].ShippingAddress.Zip}}</p>
									<span class="shipping-Phone">{{lineitems[0].ShippingAddress.Phone}}</span> 
								</li>
								<li class="shipping-Date" ng-if="lineitems[0].xp.addressType!='InStorePickUp'">
									<p class="shipping-subTitle">Delivery Date</p>
									<p>{{lineitems[0].xp.deliveryDate | date}}</p>
								</li>
								<li class="shipping-Date" ng-if="lineitems[0].xp.addressType=='InStorePickUp'">
									<p class="shipping-subTitle">Pick-Up Date</p>
									<p>{{lineitems[0].xp.pickupDate | date}}</p>
								</li>
								<li class="shipping-DeliveryPref" ng-if="lineitems[0].xp.addressType!='InStorePickUp'">
									<p class="shipping-subTitle">Delivery Preference</p>
									<p>{{checkout.buyerDtls.xp.DeliveryRuns[0][lineitems[0].xp.deliveryRun].TimeSlot}}</p>
								</li>
							</ul>
						</uib-accordion-group>
						<uib-accordion-group is-open="true">
							<uib-accordion-heading>
								<h2 ng-click="checkout.reviewAddress()">2. <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18.3 18.3" style="enable-background:new 0 0 18.3 18.3;" xml:space="preserve">
								<g>
									<path d="M9.1,1.7C5,1.7,1.7,5,1.7,9.1s3.3,7.4,7.4,7.4s7.4-3.3,7.4-7.4S13.2,1.7,9.1,1.7z M7.7,12.4L4.9,9.5L6,8.4
										l1.7,1.7l4.5-4.5l1.1,1.1L7.7,12.4z"></path>
								</g>
							</svg>Payment <button class="review-edit" ng-click="checkout.paymentInfoEdit($event)">edit</button></h2>
							</uib-accordion-heading>
							<ul class="shipping-info">
								<li class="shipping-Date" ng-if="checkout.selectedCard!='createcreditcard'">
									<p>{{checkout.selectedCard.CardholderName}}</p>
									<p>{{checkout.selectedCard.BillingAddress.Street1}}</p>
									<p>{{checkout.selectedCard.BillingAddress.Street2}}</p>
									<p>{{checkout.selectedCard.BillingAddress.City}}</p>
									<p>{{checkout.selectedCard.BillingAddress.State}}, {{checkout.selectedCard.BillingAddress.Country}}</p>
									<p>{{checkout.selectedCard.BillingAddress.Zip}}</p>
								</li>
								<li class="shipping-Date" ng-if="checkout.selectedCard=='createcreditcard'">
									<p>{{checkout.card.CardholderName}}</p>
									<p>{{checkout.billingAddress.Street1}}</p>
									<p>{{checkout.billingAddress.Street2}}</p>
									<p>{{checkout.billingAddress.City}}</p>
									<p>{{checkout.billingAddress.State}}, {{checkout.billingAddress.Country}}</p>
									<p>{{checkout.billingAddress.Zip}}</p>
								</li>
								<li class="shipping-DeliveryPref">
									<p ng-if="checkout.selectedCard!='createcreditcard'" class="shipping-subTitle">
										Credit Card: xxxx xxxx xxxx {{checkout.selectedCard.PartialAccountNumber}}
									</p>
									<p ng-if="checkout.selectedCard!='createcreditcard'">Card Expires: {{checkout.selectedCard.ExpirationDate | date:'MM/yy'}}</p>
									<p ng-if="checkout.selectedCard=='createcreditcard'">
										Credit Card: xxxx xxxx xxxx {{checkout.card.CardNumber | limitTo: -4}}
									</p>
									<p ng-if="checkout.selectedCard=='createcreditcard'">Card Expires: {{checkout.card.ExpMonth | limitTo: 2}}/{{checkout.card.ExpYear | limitTo: -2}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.PurplePerks">Purple Perks Points Applied:{{checkout.orderDtls.SpendingAccounts.PurplePerks.Amount | currency}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.BachmansCharges">Bachmans Charges Applied:{{checkout.orderDtls.SpendingAccounts.BachmansCharges.Amount | currency}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.GiftCard">Gift Card Applied:{{checkout.orderDtls.SpendingAccounts.GiftCard.Amount | currency}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.PaidCash">Cash Paid:{{checkout.orderDtls.SpendingAccounts.PaidCash.Amount | currency}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.Cheque">Cheque Amount:{{checkout.orderDtls.SpendingAccounts.Cheque.Amount | currency}}</p>
									<p ng-if="checkout.orderDtls.SpendingAccounts.Cheque">Cheque Number:{{checkout.orderDtls.SpendingAccounts.Cheque.ChequeNo}}</p>
								</li>
							</ul>
						</uib-accordion-group>
						<div class="row review-content">
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<span style="color:red;">{{checkout.TransactionError}}</span>
							</div>
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<button class="place-order" ng-click="checkout.submitOrder(checkout.card, checkout.billingAddress)">Place Order</button>
							</div>
						</div>
					</uib-accordion>
				</uib-accordion-group>
			</uib-accordion>
			<!-- For Place order button section ENDS -->
		</div>
	</div>
	<div class="checkoutContainer-right col-sm-3 col-xs-3 col-md-3 col-lg-3">
		<div class="checkoutOrderSummary">
			<div class="order-total">
				<h1>Order [ {{checkout.lineTotalQty}} items ] <a ui-sref="buildOrder({ID:checkout.order.FromUserID,SearchType:'User',showOrdersummary: true})">Edit</a> </h1>
			</div>
			<uib-accordion close-others="checkout.oneAtATime">
				<uib-accordion-group ng-repeat="(recipient, lineitems) in checkout.activeOrders">
					<uib-accordion-heading>
						<div class="checkoutorderhead">
							<p><span>Recipient:</span> {{lineitems[0].ShippingAddress.FirstName}} {{lineitems[0].ShippingAddress.LastName}}</p>
							<p><span>Zip Code:</span> {{lineitems[0].ShippingAddress.Zip}}</p>
						</div>
					</uib-accordion-heading>
					<div class="ordersummaryproductdata" ng-repeat="item in lineitems">
						<div class="prod-img">
							<img src="{{checkout.alfrescoAccessURL}}/imagefinder/{{item.Product.ID}}?alf_ticket={{checkout.alfticket}}">
						</div>
						<div class="prod-details">
							<p>{{item.Product.Name}}</p>
							<p>Item no: {{item.Product.ID}}</p>
							<p>Type: Deluxe</p>
							<span class="qty">Qty: {{item.Quantity}}</span>
							<span class="price">{{item.LineTotal | currency}}</span>
						</div>
					</div>
				</uib-accordion-group>
				<div class="charges-total">
					<p>Subtotal  <span>{{checkout.order.Subtotal | currency}}</span></p>
					<p>Delivery Charges   <span>{{checkout.order.ShippingCost | currency}} </span></p>
					<p>Estimated Tax   <span>{{checkout.order.TaxCost | currency}} </span></p>
					<p ng-if="checkout.order.PromotionDiscount > 0"><button ng-click="checkout.RemoveCoupon()">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">
							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg>
						</button> Coupon/Promotion Applied <span>-{{checkout.order.PromotionDiscount | currency}} </span>
					</p>
					<p ng-if="checkout.orderDtls.SpendingAccounts.BachmansCharges">
					<button ng-click="checkout.deleteSpendingAcc(checkout.orderDtls, 'BachmansCharges')">
						<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">

							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg>
					</button>Bachman’s Charge applied   <span>-{{checkout.orderDtls.SpendingAccounts.BachmansCharges.Amount | currency}} </span>
					</p>
					<p ng-if="checkout.orderDtls.SpendingAccounts.GiftCard"><button ng-click="checkout.deleteSpendingAcc(checkout.orderDtls, 'GiftCard')"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">

							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg></button>Gift Card applied   <span>-{{checkout.orderDtls.SpendingAccounts.GiftCard.Amount | currency}} </span></p>
					<p ng-if="checkout.orderDtls.SpendingAccounts.PaidCash"><button ng-click="checkout.deleteSpendingAcc(checkout.orderDtls, 'PaidCash')"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">

							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg></button>Paid Through Cash   <span>-{{checkout.orderDtls.SpendingAccounts.PaidCash.Amount | currency}} </span></p>
					<p ng-if="checkout.orderDtls.SpendingAccounts.Cheque"><button ng-click="checkout.deleteSpendingAcc(checkout.orderDtls, 'Cheque')"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">

							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg></button>Paid through Cheque   <span>-{{checkout.orderDtls.SpendingAccounts.Cheque.Amount | currency}} </span></p>
					<p ng-if="checkout.orderDtls.SpendingAccounts.PurplePerks"><button ng-click="checkout.deleteSpendingAcc(checkout.orderDtls, 'PurplePerks')"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
							 viewBox="0 0 34 34" style="enable-background:new 0 0 34 34;" xml:space="preserve">

							<g transform="translate(0,-952.36218)">
							<path  d="M17,952.7c-4.3,0-8.5,1.6-11.8,4.9c-6.5,6.5-6.5,17.1,0,23.6c6.5,6.5,17.1,6.5,23.6,0c6.5-6.5,6.5-17.1,0-23.6
								v0C25.5,954.3,21.3,952.7,17,952.7L17,952.7z M17,955.8c3.5,0,6.9,1.3,9.6,4c5.3,5.3,5.3,13.8,0,19.1c-5.3,5.3-13.8,5.3-19.1,0
								c-5.3-5.3-5.3-13.8,0-19.1C10.1,957.2,13.5,955.8,17,955.8z M13.1,963.9c-0.1,0-0.1,0-0.2,0c-0.9,0.1-1.5,0.9-1.4,1.7
								c0,0.4,0.2,0.7,0.5,1l2.7,2.7l-2.7,2.7c-0.6,0.6-0.6,1.6,0,2.2c0.6,0.6,1.6,0.6,2.2,0c0,0,0,0,0,0l2.7-2.7l2.7,2.7
								c0.6,0.7,1.6,0.7,2.2,0.2c0.7-0.6,0.7-1.6,0.2-2.2c-0.1-0.1-0.1-0.1-0.2-0.2l-2.7-2.7l2.7-2.7c0.6-0.6,0.6-1.6,0-2.2
								c-0.3-0.3-0.7-0.5-1.2-0.5c-0.4,0-0.8,0.2-1.1,0.5l-2.7,2.7l-2.7-2.7C14,964.1,13.6,963.9,13.1,963.9L13.1,963.9z"/>
							</g>
					  	</svg></button>Purple Perks Balance applied   <span>-{{checkout.orderDtls.SpendingAccounts.PurplePerks.Amount | currency}} </span></p>
					<p class="total">Total <span>{{checkout.order.Total | currency}}  </span></p>
				</div>
				<div class="promo-code">
					<p>Apply Promo Code</p>
					<input type="text" ng-model="checkout.coupon" />
					<input type="button" value="Apply" ng-disabled="!checkout.coupon" ng-click="checkout.ApplyCoupon(checkout.coupon, checkout.orderDtls)"/>
					<p style="color:red;" ng-bind="checkout.promoerror"></p>
				</div>
			</uib-accordion>
		</div>
	</div>
</div>
<div id="CheckoutFooter" ui-view="checkoutbottom"></div>